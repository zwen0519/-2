<script>
    function generateQR() {
        const tableValue = document.getElementById('table-input').value.trim() || "A1";
        
        // 取得當前網址路徑，並確保指向同資料夾下的 menu.html
        let currentPath = window.location.href.split('?')[0]; 
        currentPath = currentPath.substring(0, currentPath.lastIndexOf('/') + 1);
        
        const fullUrl = `${currentPath}menu.html?table=${encodeURIComponent(tableValue)}`;
        const qrImageUrl = `https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${encodeURIComponent(fullUrl)}`;
        
        document.getElementById('qr-display').src = qrImageUrl;
        document.getElementById('url-text').innerText = fullUrl;
        document.getElementById('qr-display').style.display = 'block';
        document.getElementById('loading-text').style.display = 'none';
        document.getElementById('url-container').classList.remove('hidden');
    }
</script>