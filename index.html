<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>阿倫冰店點餐測試</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-4">
    <div class="max-w-md mx-auto bg-white rounded-3xl shadow-xl p-6 text-center">
        <h1 class="text-xl font-bold mb-4">阿倫冰店 QR Code 產生器</h1>
        
        <div class="bg-blue-50 p-6 rounded-2xl mb-6">
            <img id="qr-display" src="" alt="QR碼加載中..." class="mx-auto w-48 h-48 border-4 border-white shadow-sm">
            <p id="url-text" class="text-xs text-blue-500 mt-4 break-all font-mono"></p>
        </div>

        <div class="text-left space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700">1. 輸入你的桌號：</label>
                <input type="text" id="table-input" value="A1" oninput="generateQR()" 
                    class="w-full mt-1 p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <p class="text-sm text-gray-500 italic">
                * 提示：請確保右下角的 <strong>Go Live</strong> 已經開啟。
            </p>
        </div>

        <hr class="my-6">
        <button onclick="window.location.href=document.getElementById('url-text').innerText" 
            class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold">
            模擬掃碼（進入點餐頁面）
        </button>
    </div>

    <script>
       function generateQR() {
    const table = document.getElementById('table-input').value || "A1";
    
    // 精準抓取 menu.html 的完整網址
    const currentUrl = window.location.href.split('index.html')[0].split('?')[0];
    const fullUrl = `${currentUrl}menu.html?table=${encodeURIComponent(table)}`;
    
    // 使用保證支援 HTTPS 的產生器 API
    const qrImageUrl = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(fullUrl)}`;
    
    const qrDisplay = document.getElementById('qr-display');
    qrDisplay.src = qrImageUrl;
    
    // 確保圖片載入後才顯示
    qrDisplay.onload = function() {
        qrDisplay.style.display = 'block';
    };
    
    document.getElementById('url-text').innerText = fullUrl;
}
    </script>
</body>
</html>


